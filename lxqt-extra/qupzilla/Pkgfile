# Depends on: qtwebengine qtx11extras qtsvg

description="Cross-platform QtWebEngine browser"
url="http://www.qupzilla.com/"
packager="tnut tnut<tnut@nutyx.org>"
contributors="Greg"

PKGMK_KEEP_SOURCES="no"

run=()



name=qupzilla
version=2.2.2

source=(https://github.com/QupZilla/qupzilla/releases/download/v$version/QupZilla-$version.tar.xz
)

build() {
cd QupZilla-$version
export USE_WEBGL=true \
QUPZILLA_PREFIX=/usr/ \
KDE_INTEGRATION=true \
GNOME_INTEGRATION=true
qmake
make
}

package() {
cd QupZilla-$version
make INSTALL_ROOT=$PKG/ install
}

uptodate() {
feed=https://github.com/QupZilla/$name/releases.atom
exec="lynx -read_timeout=20 -dump -listonly -nonumbers $feed"
ligne=1 # nombre de notification ? afficher
$exec $feed | grep title | \
sed "s@<title>@@" | \
sed "s@</title>@@" | \
sed "s@Version@@" | \
head -n $(($ligne+1 )) | \
tail -n $(($ligne))
}


